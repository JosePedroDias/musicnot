<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">

        <title>inspect</title>

        <style>
            body {
                font-family: sans-serif;
            }
        </style>
    </head>

	<body>
        <ul>
			<li><a href="?Happy_Birthday.song">Happy Birthday</a></li>
            <li><a href="?Let_It_Be.song">Let It Be</a></li>
            <li><a href="?Super_Mario_Theme.song">Super Mario Theme</a></li>
        </ul>

		<script>
            var inFile = location.search.substring(1);

			var ajax = function(o) {
				var xhr = new XMLHttpRequest();
				xhr.open(o.verb || 'GET', o.uri, true);
				var cbInner = function() {
					if (xhr.readyState === 4 && xhr.status > 199 && xhr.status < 300) {
						return o.cb(null, JSON.parse(xhr.response));
					}
					o.cb('error requesting ' + o.uri);
				};
				xhr.onload  = cbInner;
				xhr.onerror = cbInner;
				xhr.send(null);
			};

			ajax({
				uri: inFile,
				cb: function(err, _song) {
                    if (err) { return console.error(err); }
					window.song = _song;
					console.log(_song);
				}
			});
		</script>

	</body>	
</html>
