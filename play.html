<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">

        <title>piano</title>

        <style>
            body {
                font-family: sans-serif;
            }
        </style>

        <script src="generator.js"></script>
    </head>

    <body>
        <script>
            var timer, playing;

            var notes = 'C3 D3 E3 F3 G3 A3 B3 C4'.split(' ');
            //var notes = 'E2 A2 D3 G3 B3 E4'.split(' '); // GUITAR
            //var notes = 'B0 E1 A1 D2 G2'.split(' '); // BASE
            var symString = true;

            var onTick = function() {
                var note = notes.shift();

                if (playing) {
                    playing();
                    playing = undefined;
                }

                if (note) {
                    var f = computeFreq(note);
                    playing = symString ? genString(f) : genNote(f, 'square');
                }
                else {
                    playing = undefined;
                    console.log('all done');
                    clearInterval(timer);
                }
            };

            timer = setInterval(onTick, 500);
        </script>
    </body>
</html>
